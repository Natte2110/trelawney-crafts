{% extends "base.html" %} {% block content %}
<header class="masthead">
  <div class="container-xl px-4 mt-4 account-edit">
    <div class="row">
      <div class="col-xl-12">
        <div class="card mb-4">
          <div class="card-header">
            Account Details {% if error == "f" %}
            <p class="link-success">{{ message }}</p>
            {% else %}
            <p class="link-danger">{{ message }}</p>
            {% endif %}
          </div>
          <div class="card-body">
            <form method="POST" action="{{ url_for('account') }}">
              <!-- Form Group (username)-->
              <div class="mb-3">
                <label class="small mb-1" for="input-username"
                  >Username (how your name will appear to other users on the
                  site)</label
                >
                <input
                  class="form-control"
                  id="input-username"
                  type="text"
                  placeholder="Enter your username"
                  name="username"
                  value="{{ user.username }}"
                />
              </div>
              <!-- Form Group (email address)-->
              <div class="mb-3">
                <label class="small mb-1" for="input-email"
                  >Email address</label
                >
                <input
                  class="form-control"
                  id="input-email"
                  type="email"
                  name="email"
                  placeholder="Enter your email address"
                  value="{{ user.email }}"
                />
              </div>
              <!-- Save changes button-->
              <button class="btn btn-primary" type="submit">
                Save changes
              </button>
              <button id="delete-account" type="button" class="btn btn-primary">
                Delete Account
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="delete-account-modal" tabindex="-1" role="dialog" aria-modal="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content rounded-0 delete-account-div">
        <div class="modal-body p-4 px-5">
          <div class="main-content text-center">
            <a href="#" class="close-btn" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true"><span class="icon-close2"></span></span>
            </a>
            <div class="warp-icon mb-4">
              <span class="icon-lock2"></span>
            </div>
            <form id="delete-form">
              <h2 for="">Are you sure you want to delete your account?</h2>
              <p class="mb-4">Once your account has been deleted, it <b>cannot</b> be recovered.</p>
              <p class="mb-4">Please enter your password below to confirm the deletion of your account</p>
              <div class="form-group mb-4">
                <input type="password" id="password-check" name="password" class="form-control text-center" required placeholder="Enter password">
                <div id="delete-error"></div>
              </div>
              <div class="d-flex">
                <div class="mx-auto">
                  <button type="submit" class="btn btn-primary">Delete Account</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<script src="{{ url_for('static', filename='js/account-management.js') }}"></script>
{% endblock %}
